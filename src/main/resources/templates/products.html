<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="~{fragments/head :: head}"></div>
    <title>Cửa hàng | CANIFA</title>
    <style>
        .products-page {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
            display: flex;
            gap: 30px;
        }

        .filters-sidebar {
            width: 260px;
            flex-shrink: 0;
        }

        .products-main {
            flex: 1;
        }

        .filter-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .filter-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .filter-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            cursor: pointer;
        }

        .filter-item input {
            width: 18px;
            height: 18px;
            accent-color: #DA291C;
        }

        .filter-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option:hover,
        .color-option.active {
            border-color: #DA291C;
        }

        .filter-sizes {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .size-option {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
        }

        .size-option:hover,
        .size-option.active {
            border-color: #DA291C;
            color: #DA291C;
        }

        .price-range {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .price-input {
            width: 100px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
        }

        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .products-count {
            font-size: 14px;
            color: #666;
        }

        .sort-select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            position: relative;
            aspect-ratio: 3/4;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 700;
        }

        .product-badge.sale {
            background: #DA291C;
            color: white;
        }

        .product-badge.new {
            background: #10b981;
            color: white;
        }

        .product-wishlist {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .price-current {
            font-size: 16px;
            font-weight: 700;
            color: #DA291C;
        }

        .price-original {
            font-size: 13px;
            color: #999;
            text-decoration: line-through;
        }

        .product-colors {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .product-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid #ddd;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 40px;
        }

        .page-btn {
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-weight: 500;
        }

        .page-btn.active {
            background: #DA291C;
            color: white;
            border-color: #DA291C;
        }

        @media (max-width: 1200px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .products-page {
                flex-direction: column;
            }

            .filters-sidebar {
                width: 100%;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 500px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div th:replace="~{fragments/header :: header}"></div>

    <div class="products-page">
        <aside class="filters-sidebar">
            <div class="filter-section">
                <h3 class="filter-title">Danh mục</h3>
                <div class="filter-list"><label class="filter-item"><input type="checkbox" checked> Áo thun
                        (45)</label><label class="filter-item"><input type="checkbox"> Áo sơ mi (32)</label><label
                        class="filter-item"><input type="checkbox"> Áo khoác (28)</label><label
                        class="filter-item"><input type="checkbox"> Áo len (21)</label><label class="filter-item"><input
                            type="checkbox"> Quần jean (38)</label></div>
            </div>
            <div class="filter-section">
                <h3 class="filter-title">Màu sắc</h3>
                <div class="filter-colors"><span class="color-option active" style="background:#000"></span><span
                        class="color-option" style="background:#fff;border:1px solid #ddd"></span><span
                        class="color-option" style="background:#DA291C"></span><span class="color-option"
                        style="background:#1e40af"></span><span class="color-option"
                        style="background:#f5f5dc"></span><span class="color-option" style="background:#10b981"></span>
                </div>
            </div>
            <div class="filter-section">
                <h3 class="filter-title">Kích thước</h3>
                <div class="filter-sizes"><span class="size-option">XS</span><span
                        class="size-option active">S</span><span class="size-option">M</span><span
                        class="size-option">L</span><span class="size-option">XL</span><span
                        class="size-option">XXL</span></div>
            </div>
            <div class="filter-section">
                <h3 class="filter-title">Giá</h3>
                <div class="price-range"><input type="number" class="price-input" placeholder="Từ"><span>-</span><input
                        type="number" class="price-input" placeholder="Đến"></div>
            </div>
        </aside>

        <main class="products-main">
                <div class="products-header"><span class="products-count"
                    th:text="${#lists.isEmpty(products)} ? 'Không có sản phẩm phù hợp' : 'Tìm thấy ' + products.size() + ' sản phẩm' + (query != null && !#strings.isEmpty(query) ? ' cho \"' + query + '\"' : '')">Hiển
                    thị 1-24 của 156 sản phẩm</span><select
                    class="sort-select">
                    <option>Mới nhất</option>
                    <option>Giá: Thấp đến cao</option>
                    <option>Giá: Cao đến thấp</option>
                    <option>Bán chạy</option>
                </select></div>
            <div class="products-grid">
                <a th:each="product : ${products}" th:href="@{'/product/' + ${product.id}}" class="product-card">
                    <div class="product-image">
                        <img th:src="${product.imageUrl}" th:alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name" th:text="${product.name}">Tên sản phẩm</h3>
                        <div class="product-price">
                            <span class="price-current"
                                th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT') + 'đ'}">299,000đ</span>
                        </div>
                    </div>
                </a>
            </div>
            <div class="pagination"><button class="page-btn">←</button><button class="page-btn active">1</button><button
                    class="page-btn">2</button><button class="page-btn">3</button><button
                    class="page-btn">4</button><button class="page-btn">→</button></div>
        </main>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
    <script src="js/main.js"></script>
</body>

</html>