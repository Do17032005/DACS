<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
    <div th:fragment="header">
        <!-- Top Promo Banner -->
        <div class="top-banner">
            <div class="container">
                <a th:href="@{/products}" class="promo-link">
                    <span class="promo-text" data-editable="promo_title" data-edit-label="Ti√™u ƒë·ªÅ promo">CLOTHESSHOP SALE</span>
                    <span class="promo-divider">|</span>
                    <span data-editable="promo_discount" data-edit-label="Gi·∫£m gi√°">GI·∫¢M T·ªöI 50%</span>
                    <span class="promo-divider">|</span>
                    <span data-editable="promo_deal" data-edit-label="Deal">MUA 2 NH·∫¨N 3</span>
                    <span class="promo-divider">|</span>
                    <span data-editable="promo_hot" data-edit-label="Hot deals">HOT DEALS</span>
                </a>
            </div>
        </div>

        <!-- Sub Header Carousel -->
        <div class="sub-header">
            <div class="container">
                <div class="sub-header-slider swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <span class="sub-header-icon">üîÑ</span>
                            <span data-editable="sub_header_return" data-edit-label="Ch√≠nh s√°ch ƒë·ªïi h√†ng">ƒê·ªîI H√ÄNG MI·ªÑN PH√ç - T·∫†I T·∫§T C·∫¢ C·ª¨A H√ÄNG TRONG 30 NG√ÄY</span>
                        </div>
                        <div class="swiper-slide">
                            <span class="sub-header-icon">‚úì</span>
                            <span data-editable="sub_header_authentic" data-edit-label="H√†ng ch√≠nh h√£ng">100% H√ÄNG CH√çNH H√ÉNG</span>
                        </div>
                        <div class="swiper-slide">
                            <span class="sub-header-icon">üöö</span>
                            <span data-editable="sub_header_freeship" data-edit-label="Freeship">FREESHIP ƒê∆†N T·ª™ 499K</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Header -->
        <header class="main-header">
            <div class="container">
                <div class="header-content">
                    <!-- Logo -->
                    <a th:href="@{/}" class="logo">
                        <img th:src="@{/images/logo.png}" alt="ClothesShop" class="logo-img" style="height: 40px;">
                    </a>

                    <!-- Search Bar -->
                    <form th:action="@{/products}" method="get" class="search-bar">
                        <input type="text" name="search" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." class="search-input" th:value="${searchKeyword}">
                        <button type="submit" class="search-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </form>

                    <!-- Header Icons -->
                    <div class="header-icons">
                        <!-- Admin Panel (Only for ADMIN users) -->
                        <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/dashboard}"
                            class="header-icon-link admin-link">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            <span>Admin</span>
                        </a>
                        <a th:href="@{/chat}" class="header-icon-link">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M12 8V4H8"></path>
                                <rect x="4" y="8" width="16" height="12" rx="2"></rect>
                                <path d="M2 14h2"></path>
                                <path d="M20 14h2"></path>
                                <path d="M15 13v2"></path>
                                <path d="M9 13v2"></path>
                            </svg>
                            <span>AI Stylist</span>
                        </a>
                        <a th:href="@{/products}" class="header-icon-link">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            <span>C·ª≠a h√†ng</span>
                        </a>
                        <div class="header-icon-link account-dropdown" id="accountDropdown">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span
                                th:text="${#authentication != null and #authentication.name != 'anonymousUser'} ? ${#authentication.name} : 'T√†i kho·∫£n'">T√†i
                                kho·∫£n</span>

                            <!-- Dropdown Menu -->
                            <div class="account-dropdown-menu"
                                th:if="${#authentication != null and #authentication.name != 'anonymousUser'}">
                                <a th:href="@{/profile}" class="dropdown-item">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="1.5">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    <span>Th√¥ng tin c√° nh√¢n</span>
                                </a>
                                <a th:href="@{/orders}" class="dropdown-item">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="1.5">
                                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                                        <line x1="3" y1="6" x2="21" y2="6"></line>
                                    </svg>
                                    <span>ƒê∆°n h√†ng c·ªßa t√¥i</span>
                                </a>
                                <hr class="dropdown-divider">
                                <form th:action="@{/logout}" method="post" style="margin: 0;">
                                    <button type="submit" class="dropdown-item logout-btn">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="1.5">
                                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                            <polyline points="16 17 21 12 16 7"></polyline>
                                            <line x1="21" y1="12" x2="9" y2="12"></line>
                                        </svg>
                                        <span>ƒêƒÉng xu·∫•t</span>
                                    </button>
                                </form>
                            </div>

                            <!-- Login Link for non-authenticated users -->
                            <a th:if="${#authentication == null or #authentication.name == 'anonymousUser'}"
                                th:href="@{/login}"
                                style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;"></a>
                        </div>
                        <a th:href="@{/cart}" class="header-icon-link cart-link">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <path d="M16 10a4 4 0 0 1-8 0"></path>
                            </svg>
                            <span>Gi·ªè h√†ng</span>
                            <span class="cart-count">0</span>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Menu -->
        <nav class="main-nav">
            <div class="container">
                <ul class="nav-menu">
                    <li class="nav-item sale-item">
                        <a th:href="@{/products}" class="nav-link sale-link">SHOPPING DAY</a>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a th:href="@{/products(category='N·ªÆ')}" class="nav-link">N·ªÆ</a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <div class="mega-col">
                                    <h4>√Åo</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='√Åo thun')}">√Åo thun</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='√Åo s∆° mi')}">√Åo s∆° mi</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='√Åo len')}">√Åo len</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='√Åo kho√°c')}">√Åo kho√°c</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='√Åo hoodie')}">√Åo hoodie</a></li>
                                    </ul>
                                </div>
                                <div class="mega-col">
                                    <h4>Qu·∫ßn</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='Qu·∫ßn jean')}">Qu·∫ßn jean</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='Qu·∫ßn kaki')}">Qu·∫ßn kaki</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='Qu·∫ßn short')}">Qu·∫ßn short</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='Qu·∫ßn jogger')}">Qu·∫ßn jogger</a></li>
                                    </ul>
                                </div>
                                <div class="mega-col">
                                    <h4>V√°y & ƒê·∫ßm</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='V√°y')}">V√°y</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='ƒê·∫ßm')}">ƒê·∫ßm</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='Ch√¢n v√°y')}">Ch√¢n v√°y</a></li>
                                    </ul>
                                </div>
                                <div class="mega-col">
                                    <h4>ƒê·ªì m·∫∑c nh√†</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='B·ªô m·∫∑c nh√†')}">B·ªô m·∫∑c nh√†</a></li>
                                        <li><a th:href="@{/products(category='N·ªÆ',subcategory='ƒê·ªì ng·ªß')}">ƒê·ªì ng·ªß</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a th:href="@{/products(category='NAM')}" class="nav-link">NAM</a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <div class="mega-col">
                                    <h4>√Åo</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='NAM',subcategory='√Åo thun')}">√Åo thun</a></li>
                                        <li><a th:href="@{/products(category='NAM',subcategory='√Åo polo')}">√Åo polo</a></li>
                                        <li><a th:href="@{/products(category='NAM',subcategory='√Åo s∆° mi')}">√Åo s∆° mi</a></li>
                                        <li><a th:href="@{/products(category='NAM',subcategory='√Åo kho√°c')}">√Åo kho√°c</a></li>
                                    </ul>
                                </div>
                                <div class="mega-col">
                                    <h4>Qu·∫ßn</h4>
                                    <ul>
                                        <li><a th:href="@{/products(category='NAM',subcategory='Qu·∫ßn jean')}">Qu·∫ßn jean</a></li>
                                        <li><a th:href="@{/products(category='NAM',subcategory='Qu·∫ßn kaki')}">Qu·∫ßn kaki</a></li>
                                        <li><a th:href="@{/products(category='NAM',subcategory='Qu·∫ßn short')}">Qu·∫ßn short</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a th:href="@{/products(category='B√â G√ÅI')}" class="nav-link">B√â G√ÅI</a>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a th:href="@{/products(category='B√â TRAI')}" class="nav-link">B√â TRAI</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/products(isNew=true)}" class="nav-link">S·∫¢N PH·∫®M M·ªöI</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/products(bestseller=true)}" class="nav-link">B√ÅN CH·∫†Y</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/products}" class="nav-link">KHUY·∫æN M√ÉI</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/products(category='SCHOOL')}" class="nav-link">SCHOOL</a>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a th:href="@{/products(category='SCHOOL')}" class="nav-link">ƒê·ªíNG PH·ª§C</a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</body>

</html>